<!DOCTYPE html>
    <head>
        <meta name="viewport" content="width=device-width, initial">
        <meta charset="utf-8" />
        <title> Joojle Drive - Admin </title>
    </head>
    <body>
        <h1> Joojle Drive Admin DashBoard </h1> <br>
        <h2> Hello, Rick Astley!</h2>
        <h4> Updates:</h4>
        <li> Added Key Based Authentication</li>
        <li> à¶ž </li>
        <br>
        <h2> Data Base Access </h2>
        <h4> Enter Key: </h4>
        <input type="text" id="key"></input>
        <h4> Enter User: </h4>
        <input type="text" id="user"></input>
        <br><br>
        <button type="button" onclick="onClick()">Search</button>
        <p id="status"> </p>
        <h4>Result:</h4>    
        <p id="result"></p>
    <script>
            /*

                Note to Developers:
                    For Debugging, or Testing
                    Secret Keys can be found
                    at: 
                    "//"+location.host+"/joojle_test_repository.html"

                
            
            */

            const keyField = document.getElementById('key');
            const userField = document.getElementById('user');
            const resultField = document.getElementById('result');
            const statusField = document.getElementById('status');

      
            function validate(Username,KEY) {    
                fetch("//"+location.host+"/jdl_admin_lookup/"+Username+"/"+KEY)
                        .then(response => {
                            if (!response.ok) {
                                statusField.innerHTML = "Success!"
                                keyField.innerHTML = "Network Error"
                                console.error(result)            
                            }
                            response.text().then(data => {
                                if(data === "Failure, Just Like My Son.") {
                                    statusField.innerHTML = "Error!"
                                    console.log(data)
                                    resultField.innerHTML = ""
                                }
                                else {
                                    statusField.innerHTML = "Success!"
                                    console.log(data)
                                    resultField.innerHTML = data
                                }
                            })
                        })
                        .catch(error => console.log(error))
            }
            
            function onClick() {
                validate(userField.value,keyField.value)
            }

        </script>
    </body>
</html>