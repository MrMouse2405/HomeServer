<!DOCTYPE html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title> Joojle Drive</title>
    </head>
    <body>
        <h1> Joojle Drive </h1>
        <h2> The World's best cloud storage platform!</h2>

        <h3> Updates: </h3>
        <li> Patched an important bug fix. Totally not a security bug. </li>

        <h3> Login: </h3>
        <h4> Enter UserName: </h4>
        <input type="text" id="username">
        <h4> Enter Password: </h4>
        <input type="password" id="password">
        <br><br>
        <button onclick="onClick()">Login</button>
        <br><br>
        <p id="status"></p>
        <button onclick="window.location='joojle_admin_login.html';">Admin Login</button>
        <script>
            const usernameField = document.getElementById("username")
            const passwordField = document.getElementById("password")
            const statusField = document.getElementById("status")

            function validate(username,password) {    
                fetch("http://72.136.31.97/jdl_login/"+username+"/"+password)
                        .then(response => {
                            if (!response.ok) {
                                statusField.innerHTML = "Success!"
                                statusField.innerHTML = "Network Error"
                                console.error(result)            
                            }
                            response.text().then(data => {
                                if(data === "Failure, Just Like My Son.") {
                                    statusField.innerHTML = "Invalid User Name or Password!"
                                    console.log(data)
                                }
                                else {
                                    statusField.innerHTML = "Success!"
                                   window.location = data
                                }
                            })
                        })
                        .catch(error => console.log(error))
            }
            
            function onClick() {
                validate(usernameField.value,passwordField.value)
            }

        </script>
    </body>
</html>